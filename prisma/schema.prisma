// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}



datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
model DataFromGoverment {
  dataID              String         @id @default(uuid())
  licenseNumber       String  @unique
  exporter            String
  recipient           String
  buyer               String?
  exportAgent         String
  companyTax          String
  product             String
  issueDate           DateTime
  expiredDate         DateTime
  exportDate          DateTime?
  buyerCountry        String
  destinationCountry  String
  exportBy            String?
  vehicle             String
  portName            String
  currency            String
  exchangeRate        Float
  permitConditions    String

  licenseDetails      LicenseDetail[]
}

model LicenseDetail {
  licenseDetailID     String         @id @default(uuid())
  permitId            String
  permit              DataFromGoverment @relation(fields: [permitId], references: [dataID])

  tariffType          String?
  netWeightTON        Float?
  netWeightUnit       String?
  netWeightKGM        Float?
  netWeightUnitKGM    String?
  quantity            Int?
  quantityUnit        String?
  pricePerUnit        Float?
  currencyPerTON      String?
  fob                 Float?
  price               Float?
  incoterms           String?
  productDescription  String?
}

model Company {
  companyID           String         @id @default(uuid())
  companyNameEN       String
  companyNameTH       String
  companyDescription  String
}

model Request {
  requestID           String         @id @default(uuid())
  companyName          String //ชื่อผู้ส่งออก
  requestBy           String  //ผู้ขอตรวจสอบ
  requestDate         DateTime //วันที่ส่งคำขอ
  shippingDateTime    DateTime  //วันเวลาที่จะบรรลุ
  surveyLocateNameThai    String //สถานที่ตรวจสอบ
  surveyLocateNameEng    String //สถานที่ตรวจสอบ ภาษาอังกฤษ
  surveyPaidBy        String //เรียกเก็บเงิน
  surveyProvince      String // จังหวัด 
  surveySubDistrict   String // อำเภอ
  telInspector        String // เบอร์ติดต่อผู้ตรวจสอบ
  telDebtor           String   //เบอร์ติดต่อเรียกเก็บเงิน
  license           String // เลขที่ใบอนุญาต


  descriptions        Description[] 
  validate_Check_Weight validate_Check_Weight[]
}

model Description {
  descriptionID        String         @id @default(uuid())
  requestId            String
  request              Request  @relation(fields: [requestId], references: [requestID])
  destination          String
  exchangeRate         Float
  pricePerUnit         Float
  productDescription   String
  quantity             Int
  quantityUnit         String
  weightLeft           Float
  grossWeight          Float
  licenseID            String
  logo                 String
  netWeight            Float
  riceTypeExtra        String
  riceTypeID           String
  subID                Int
  vehicleName          String
  validate_Check_Weight validate_Check_Weight[]
}

model validate_Check_Weight {
  checkWeightID       String         @id @default(uuid())
  loadingDetail1      String?
  time                String?
  bagQuantity         Int?
  grossWeight         Float?
  jobID               String?

  descriptionID     String
  netWeight           Float?
  quantity            Float?
  requestID           String
  riceTypeID          String?
  shippingDate        DateTime?
  staffID             String?
  statusContinue       String?
  status              Boolean
  companyName          String?
  request              Request  @relation(fields: [requestID], references: [requestID])
  description        Description @relation(fields: [descriptionID], references: [descriptionID])
    // licenseID           String
}

model certificatesheet {
  certificateSheetID  String         @id @default(uuid())
  jobID               String
  license             String?
  No                  Int?
  NoOld               Int?
  PackingType1        String?
  PackingType11       String?
  PackingType12       String?
  PackingType2        String?
  quality1            String?   @map("Quality1string")
  quality2            String?   @map("Quality2string")
  shipperBehalf       String?
  totalGross          String?
  totalNett           Float?
  totalTare           String?
  weight              String?   @map("Weightstring")
  bagQuantity         String?
  companyEN           String?
  currentDate         String?
  destinationCity     String?
  godown              String?
  // logo                String?
  shippingDate        String?
  shippingPort        String?
  carryVessel         String?
  destination         String?
  exportLicenseNo     String?
  title1              String ?  @map("title1string")
  vehicleName         String?

  // @@map("certificatesheet")
}

model User {
  id  String   @unique @default(uuid())
  email String  @unique
  hashpassword String       
  password String @unique
  roleUserLevel String    //Root-Admin,Super-Admin,Subroot-Admin,"User" 
  createdAt         DateTime       @default(dbgenerated("timezone('Asia/Ho_Chi_Minh', now())"))
  updatedAt         DateTime       @default(dbgenerated("timezone('Asia/Ho_Chi_Minh', now())")) @updatedAt

}
